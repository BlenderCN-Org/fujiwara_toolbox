# MarvelousDesigner関係機能

## 前提
* キャラをリンクしている
* キャラ内の、アバターにしたいメッシュオブジェクトの名前が"Body"になっている
* キャラのblendファイルの設置場所に同名の.zpac（衣装ファイル）を設置

    ex.

        キャラ/
            キャラA.blend
            キャラA.zpac
* キャラにはジオメトリ用ボーンとして"Geometry","geometry","geo"のいずれかのボーンが必要
* キャラのポージングは、プロクシやリンクのトランスフォームは初期値にして、ジオメトリ用ボーンで全体の位置を変更する。
* 画像マッチングによってMarvelousDesignerを制御しているので、MarvelousDesignerのウィンドウ表示が拡大されていたりすると操作できない。（画面設定の倍率や、4Kモニタなどで起動したときに勝手に拡大表示になるのがマズい。）
* ウィルス対策ソフトでfujiwara_toolbox下を除外設定しておく（uwsc_wrapper.exeがよく疑われる）
* MarvelousDesigner7は.objエクスポートでblenderでインポートできない不正なデータが出力することがあるので、6.5推奨。

## 手順
1. MarvelousDesignerを起動しておく
1. シミュレーションをしたい.blendファイルを起動
1. シミュレーションをしたいリンクオブジェクト「のみ」を選択
1. 「メイン」→「MarvelousDesigner」→「すべてシミュレート」
1. MarvelousDesignerが自動操作されるので、キーボード・マウスから手を離しておく。
1. 完了すると、.blendファイルが再起動する。
1. 「メイン」→「MarvelousDesigner」→「オートインポート」をすると、自動的にシミュレーション結果の.objが読み込まれて、裏ポリエッジと漫画マテリアルが付加される。（藤原用挙動なので仕様検討中）

